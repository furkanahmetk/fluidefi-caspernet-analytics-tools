FROM postgres:latest


WORKDIR /usr/src/app

# Set environment variables
ARG WRITE_DB_CONNECTION_HOST
ENV WRITE_DB_CONNECTION_HOST=$WRITE_DB_CONNECTION_HOST

ARG WRITE_DB_CONNECTION_DATABASE
ENV WRITE_DB_CONNECTION_DATABASE=$WRITE_DB_CONNECTION_DATABASE

ARG WRITE_DB_CONNECTION_USERNAME
ENV WRITE_DB_CONNECTION_USERNAME=$WRITE_DB_CONNECTION_USERNAME

ARG WRITE_DB_CONNECTION_PASSWORD
ENV WRITE_DB_CONNECTION_PASSWORD=$WRITE_DB_CONNECTION_PASSWORD

ARG WRITE_DB_CONNECTION_PORT
ENV WRITE_DB_CONNECTION_PORT=$WRITE_DB_CONNECTION_PORT



# Copy the script into the container
COPY ./cspr_summarization/services/dump_data_loader/script.sh .

# Set the script as executable
RUN chmod +x ./script.sh

# Run the script when the container starts
ENTRYPOINT ["/bin/sh", "-c", "./script.sh"]

